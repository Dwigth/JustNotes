(function(){function t(e,n,o){function i(s,l){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!l&&c)return c(s,!0);if(r)return r(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return i(n||t)},d,d.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}return t})()({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class o{constructor(){this.AlertElement=document.querySelector("#error-message")}showAlert(t){this.AlertElement.style.visibility="visible",this.AlertElement.children[0].textContent=t,setTimeout(()=>{this.AlertElement.style.visibility="hidden"},3e3)}}o.instance=void 0,n.AlertController=o},{}],2:[function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function l(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,l)}c((o=o.apply(t,e||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const i=t("../config/config");class r{constructor(){}static POST(t,e){return o(this,void 0,void 0,function*(){return yield fetch(i.URL+e,{method:"POST",body:JSON.stringify(t),headers:i.header}).then(t=>t.json()).catch(t=>t).then(t=>t)})}static GET(t){return o(this,void 0,void 0,function*(){return yield fetch(i.URL+t,{method:"GET",headers:i.header}).then(t=>t.json()).catch(t=>t).then(t=>t)})}}n.HTTPController=r},{"../config/config":6}],3:[function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function l(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,l)}c((o=o.apply(t,e||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const i=t("./vista.controller"),r=t("../services/notas.service"),s=t("./alert.controllert");class l{constructor(){this.notas=[],this.ITitulo=document.getElementById("ITitulo"),this.IContenido=document.getElementById("IContenido"),this.IContenedor=document.getElementById("IContenedor"),this.IConfirmacion=document.getElementById("IConfirmacion"),this.ILista=document.getElementById("ILista"),l.IRefresh=document.getElementById("IRefresh"),this.IConfirmacion.addEventListener("click",()=>{this.save(),this.afterClickIContenido("none")}),this.IContenido.addEventListener("click",()=>{this.afterClickIContenido("initial")}),this.afterClickIContenido("none"),this.displayNotas(),l.IRefresh.addEventListener("click",()=>{this.refresh()})}displayNotas(){return o(this,void 0,void 0,function*(){let t=yield r.NotasService.obtenerNotas();console.log(t);let e=new s.AlertController;null==t.data?e.showAlert("Ha habido un error"):e.showAlert(t.msg);let n=null!=t.data?Array.from(t.data):[];this.notas=n;new i.VistaController(this.notas).renderNotas(this.IContenedor)})}getITitulo(){return null!=this.ITitulo?this.ITitulo.value:"Objeto es nulo"}getIContenido(){return null!=this.IContenido?this.IContenido.value:"Objeto es nulo"}afterClickIContenido(t){this.ITitulo.style.display=t,this.IConfirmacion.style.display=t,this.ILista.style.display=t}save(){let t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();console.log(e);var n={titulo:this.getITitulo(),contenido:this.getIContenido(),id_usuario:1,lista:!1,fecha_creacion:e,fecha_modificacion:e};if(""!==n.contenido){r.NotasService.agregarNota(n);new i.VistaController(this.notas).renderNotas(this.IContenedor);this.clean(),this.displayNotas()}}clean(){this.ITitulo.value="",this.IContenido.value=""}refresh(){l.IRefresh.classList.add("refresh"),this.displayNotas().finally(()=>l.IRefresh.classList.remove("refresh"))}static spin(t){t?this.IRefresh.classList.add("refresh"):l.IRefresh.classList.remove("refresh")}}n.InputController=l},{"../services/notas.service":7,"./alert.controllert":1,"./vista.controller":4}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=t("./input.controller"),i=t("../services/notas.service"),r=t("./alert.controllert");class s{constructor(t){this.colors=["FF637D","F4F1BB","66D7D1","EAF2E3","FFF87F"],this.opts=["Agregar etiqueta","Mostrar lista","Eliminar"],this.notas=t}renderNotas(t){this.backdrop=document.getElementById("backdrop"),t.innerHTML="",t.classList.add("grid"),this.notas.forEach(e=>{const n=this.cardBuilder(e);t.append(n)}),this.Masonry=new Masonry(".grid",{itemSelector:".nota-card",columnWidth:20})}cardBuilder(t){const e=new r.AlertController,n=document.createElement("div");n.classList.add("nota-card","cursor"),n.id=`card_${t.id_nota}`,t.color&&(n.style.backgroundColor="#"+t.color);const s=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div"),v=document.createElement("div"),f=document.createElement("i"),m=document.createElement("i"),y=document.createElement("input"),p=document.createElement("input");return y.classList.add("EInput"),p.classList.add("EInput"),y.style.visibility="hidden",p.style.visibility="hidden",y.value=t.titulo,p.value=t.contenido,s.textContent=t.titulo,l.textContent=t.contenido,f.textContent="color_lens",m.textContent="more_vert",s.classList.add("nota-card-header"),l.classList.add("nota-card-content"),c.classList.add("nota-card-footer","row"),a.classList.add("u-full-width"),u.classList.add("colors_dropdown"),h.classList.add("more_dropdown","more_list"),d.classList.add("six","columns"),f.classList.add("material-icons","cursor"),m.classList.add("material-icons","cursor"),v.classList.add("six","columns"),d.append(u,f),v.append(h,m),a.append(d,v),c.appendChild(a),this.colors.forEach(r=>{const s=document.createElement("div");s.classList.add("circle"),s.style.backgroundColor="#"+r,s.addEventListener("click",()=>{console.log(r),n.style.backgroundColor="#"+r,u.style.visibility="hidden",o.InputController.spin(!0),t.color=r,i.NotasService.editarNota(t).then(t=>{t&&e.showAlert(t.msg),o.InputController.spin(!1)}).catch(t=>{t&&e.showAlert("Ha ocurrido un error"),o.InputController.spin(!1)})}),u.appendChild(s)}),f.addEventListener("mouseover",t=>{u.style.visibility="visible"}),u.addEventListener("mouseleave",t=>{u.style.visibility="hidden"}),this.opts.forEach(t=>{const e=document.createElement("div");e.classList.add("more_list-item"),e.textContent=t,e.addEventListener("click",()=>{h.style.visibility="hidden"}),e.addEventListener("mouseover",t=>{e.style.backgroundColor="rgba(0,0,0,0.05)"}),e.addEventListener("mouseleave",t=>{e.style.backgroundColor="rgba(0,0,0,0)"}),h.appendChild(e)}),m.addEventListener("click",()=>{console.log("more"),h.style.visibility="visible"}),s.addEventListener("click",()=>{console.log("Carta ",t.id_nota),y.style.visibility="visible"}),n.addEventListener("click",()=>{console.log("Carta ",t.id_nota),n.classList.add("nota-click"),this.backdrop.style.visibility="visible"}),this.backdrop.addEventListener("click",()=>{n.classList.remove("nota-click"),this.backdrop.style.visibility="hidden"}),n.append(s,y,l,p,c),n}}n.VistaController=s},{"../services/notas.service":7,"./alert.controllert":1,"./input.controller":3}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=t("./actions/input.controller");new o.InputController},{"./actions/input.controller":3}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.URL="http://localhost:2405",n.header={"Content-Type":"application/json"}},{}],7:[function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function l(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,l)}c((o=o.apply(t,e||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const i=t("../actions/http.controller");class r{constructor(){}static obtenerNotas(){return o(this,void 0,void 0,function*(){return yield i.HTTPController.GET("/notas/obtener")})}static agregarNota(t){return o(this,void 0,void 0,function*(){return yield i.HTTPController.POST(t,"/notas/agregar").then(t=>(console.log(t),t)).catch(t=>console.error(t))})}static editarNota(t){return o(this,void 0,void 0,function*(){return yield i.HTTPController.POST(t,"/notas/editar").then(t=>t).catch(t=>console.error(t))})}}n.NotasService=r},{"../actions/http.controller":2}]},{},[5]);